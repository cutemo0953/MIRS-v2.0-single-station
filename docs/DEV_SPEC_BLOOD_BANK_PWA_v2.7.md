# Blood Bank PWA DEV SPEC v2.8

**ç‰ˆæœ¬**: 2.8.0
**æ—¥æœŸ**: 2026-01-14
**ç‹€æ…‹**: Tab æ¶æ§‹é‡æ§‹ + ç·Šæ€¥æè¡€æµç¨‹
**åŸºæ–¼**: v2.7.1 + UX å„ªåŒ–éœ€æ±‚

---

## v2.8.0 è®Šæ›´æ‘˜è¦ (2026-01-14)

### æ ¸å¿ƒè®Šæ›´: Tab æ¶æ§‹é‡æ§‹

**åŸæœ¬æ¶æ§‹:**
1. åº«å­˜ç¸½è¦½ - çµ±è¨ˆå¡ç‰‡ + åˆ†é¡æ‘˜è¦
2. è¡€è¢‹æ¸…å–® - å–®ä½åˆ—è¡¨ + å…¥åº«æŒ‰éˆ•
3. ç™¼è¡€ - ä¸‰éšæ®µç™¼è¡€æµç¨‹
4. å¾…è£œå–® - ç·Šæ€¥ç™¼è¡€è¿½è¹¤

**æ–°æ¶æ§‹:**
1. **åº«å­˜ç¸½è¦½** - çµ±è¨ˆå¡ç‰‡ + **å®Œæ•´å–®ä½åˆ—è¡¨** (å« FIFO/é ç´„/ç™¼è¡€æŒ‰éˆ•)
2. **å…¥åº«+æ¨™ç±¤** - å…¥åº«ä¾†æºé¸æ“‡ + ç·Šæ€¥æè¡€ + è£œå°æ¨™ç±¤
3. ç™¼è¡€ - ä¸è®Š
4. å¾…è£œå–® - ä¸è®Š

### æ–°åŠŸèƒ½

| é …ç›® | èªªæ˜ |
|------|------|
| **åº«å­˜ç¸½è¦½æ•´åˆ** | é»æ“Šè¡€å‹å¡ç‰‡å¾Œï¼Œç›´æ¥åœ¨ç¸½è¦½ Tab é¡¯ç¤ºå®Œæ•´è¡€è¢‹æ¸…å–®ï¼Œå¯ç›´æ¥ç™¼è¡€/é ç´„ |
| **å…¥åº«ä¾†æºé¸æ“‡** | å¡ç‰‡å¼é¸æ“‡ï¼šæè¡€ä¸­å¿ƒ vs ç·Šæ€¥æè¡€ (Walking Blood Bank) |
| **ç·Šæ€¥æè¡€æµç¨‹** | æ–°å¢æè¡€è€…è³‡è¨Šè¨˜éŒ„ (å§“å/é›»è©±)ï¼Œè‡ªå‹•è¨­å®š 21 å¤©æ•ˆæœŸ |
| **è£œå°æ¨™ç±¤** | å…¥åº«+æ¨™ç±¤ Tab å¯å¾ç¾æœ‰è¡€è¢‹æ¸…å–®è£œå°æ¨™ç±¤ |

### UI è®Šæ›´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åº«å­˜ç¸½è¦½   â”‚  å…¥åº«+æ¨™ç±¤   â”‚    ç™¼è¡€    â”‚   å¾…è£œå–®              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  [è¡€å‹å¡ç‰‡ Grid + çµ±è¨ˆ] (åŒ v2.7)                                 â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  [å…¨éƒ¨] [O+] [O-] [A+] [A-] [B+] [B-] [AB+] [AB-]           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â–Œ O+  [PRBC] [å¯ç”¨]                        [FIFO å„ªå…ˆ]      â”‚ â”‚
â”‚  â”‚ â–Œ BU-20260113-ABC123                       æ•ˆæœŸ: 48h        â”‚ â”‚
â”‚  â”‚ â–Œ [      ç™¼è¡€      ]  [     é ç´„     ]                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…¥åº«+æ¨™ç±¤ Tab è¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å…¥åº«+æ¨™ç±¤                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚    ğŸ¥          â”‚  â”‚    ğŸš¨          â”‚                          â”‚
â”‚  â”‚   æè¡€ä¸­å¿ƒ      â”‚  â”‚   ç·Šæ€¥æè¡€      â”‚                          â”‚
â”‚  â”‚  è¡€æ¶²åŸºé‡‘æœƒé…é€  â”‚  â”‚ Walking Blood  â”‚                          â”‚
â”‚  â”‚               â”‚  â”‚     Bank       â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ·ï¸ è£œå°æ¨™ç±¤                                                â”‚ â”‚
â”‚  â”‚  O+ [PRBC] BU-20260113...              [åˆ—å°]               â”‚ â”‚
â”‚  â”‚  O- [WB]   BU-20260112...              [åˆ—å°]               â”‚ â”‚
â”‚  â”‚  A+ [FFP]  BU-20260111...              [åˆ—å°]               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â° æœ€è¿‘å…¥åº«                                                 â”‚ â”‚
â”‚  â”‚  O+ PRBC  ...ABC123                                         â”‚ â”‚
â”‚  â”‚  O- WB    ...DEF456                                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç·Šæ€¥æè¡€ Modal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš¨ ç·Šæ€¥æè¡€ (Walking Blood Bank)                     [X]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  âš ï¸ ç·Šæ€¥æè¡€ï¼šé©ç”¨æ–¼ç¾å ´æè¡€è€…ç›´æ¥è¼¸è¡€çš„ç·Šæ€¥ç‹€æ³ã€‚                 â”‚
â”‚     éœ€è¨˜éŒ„æè¡€è€…è³‡è¨Šï¼Œäº‹å¾Œè£œåšå®Œæ•´è¡€æ¶²æª¢é©—ã€‚                       â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  æè¡€è€…è³‡è¨Š                                                  â”‚ â”‚
â”‚  â”‚  å§“å *: [____________]   é›»è©±: [____________]              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  è¡€å‹ *: [O+ â–¼]              è¡€å“é¡å‹: [WB (å…¨è¡€) - ç·Šæ€¥é¦–é¸]     â”‚
â”‚                                                                   â”‚
â”‚  â„¹ï¸ æ•ˆæœŸå°‡è‡ªå‹•è¨­ç‚º 21 å¤© (Walking Blood Bank æ¨™æº–)                â”‚
â”‚                                                                   â”‚
â”‚  [              ç¢ºèªç·Šæ€¥å…¥åº«              ]                       â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æª”æ¡ˆè®Šæ›´

| æª”æ¡ˆ | è®Šæ›´ |
|------|------|
| `frontend/blood/index.html` | Tab é‡æ§‹ + ç·Šæ€¥æè¡€ Modal + è£œå°æ¨™ç±¤ |
| `frontend/blood/service-worker.js` | v2.8.0 å¿«å–åˆ·æ–° |
| `Index.html` | MIRS è¡€åº« Tab æ¢å¾©æ·±ç´…è‰²çµ±è¨ˆå€å¡Š |

---

## v2.7.1 è®Šæ›´æ‘˜è¦ (2026-01-13)

### æ–°å¢åŠŸèƒ½

| é …ç›® | èªªæ˜ |
|------|------|
| **å…¥åº«å¡ç‰‡å¼è¨­è¨ˆ** | Units Tab é ‚éƒ¨æ–°å¢æ·±ç´…æ¼¸å±¤å…¥åº«å¡ç‰‡ï¼Œå–ä»£ä¸æ˜é¡¯çš„å°æŒ‰éˆ• |
| **WB (å…¨è¡€) è³‡æ–™** | Demo æ¨¡å¼æ–°å¢ O+ (2è¢‹) å’Œ O- (1è¢‹å³æœŸ) å…¨è¡€ç¯„ä¾‹ |
| **MIRS è¡€åº«å¡ç‰‡åŒæ­¥** | MIRS Index.html è¡€åº« Tab åŒæ­¥æ¡ç”¨å¤§å‹å¡ç‰‡ + é»æ“Šéæ¿¾ |

### Responsive å„ªåŒ–

| å•é¡Œ | è§£æ±ºæ–¹æ¡ˆ |
|------|----------|
| ç­†é›»ä¸Šå¡ç‰‡éé•· | æ‰€æœ‰ Tab å…§å®¹æ·»åŠ  `max-w-3xl mx-auto` |
| è¡€å‹å¡ç‰‡ç¶²æ ¼ | æ‰‹æ©Ÿ `grid-cols-4` / å¹³æ¿ä»¥ä¸Š `grid-cols-8` |
| Legend æ¨™ç±¤éçª„ | æ·»åŠ  `flex-wrap` å’Œè¼ƒå° padding |

### æª”æ¡ˆè®Šæ›´

| æª”æ¡ˆ | è®Šæ›´ |
|------|------|
| `frontend/blood/index.html` | å…¥åº«å¡ç‰‡ + max-w-3xl é™åˆ¶ |
| `frontend/blood/service-worker.js` | v2.7.1 å¿«å–åˆ·æ–° |
| `routes/blood.py` | WB åŠ å…¥ UNIT_TYPES + Demo è³‡æ–™ |
| `Index.html` | MIRS è¡€åº« Tab å¤§å‹å¡ç‰‡ + filterBloodType |

---

## v2.6 â†’ v2.7 è®Šæ›´æ‘˜è¦ (MIRS Legacy Style)

### æ ¸å¿ƒç›®æ¨™

> **ã€Œç•¶ä½¿ç”¨è€…æ‰“é–‹ Appï¼Œæ‡‰è©²ç«‹åˆ»çœ‹åˆ°ã€æˆ‘æœ‰æ²’æœ‰ O- è¡€ï¼Ÿã€è€Œä¸éœ€è¦é–±è®€åˆ—è¡¨ã€**

v2.6 åŠŸèƒ½æ­£ç¢ºï¼Œä½†è¦–è¦ºè¨­è¨ˆå¤±å»äº†åŸå§‹ MIRS Dashboard çš„ã€Œå„ªé›…èˆ‡å³æ™‚æ€§ã€ã€‚v2.7 é‡æ§‹ UI ä»¥åŒ¹é… **MIRS Legacy Style**ã€‚

### UI æ”¹é€²é …ç›®

| é …ç›® | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| **Big Colored Cards Grid** | âœ… å®Œæˆ | 2x4 è¡€å‹å¡ç‰‡ç¶²æ ¼ï¼Œéç©ºæ·±ç´…/ç©ºç°è‰² |
| **Click-to-Filter** | âœ… å®Œæˆ | é»æ“Šå¡ç‰‡éæ¿¾ä¸‹æ–¹åˆ—è¡¨ |
| **Left Border Color Coding** | âœ… å®Œæˆ | è¡€è¢‹æ¸…å–®ä¾è¡€å“é¡å‹é¡¯ç¤ºå·¦å´ 8px è‰²æ¢ |
| **Prominent Unit ID & Expiry** | âœ… å®Œæˆ | è¡€è¢‹ ID å’Œæ•ˆæœŸæ”¾å¤§çªé¡¯ |
| **Emergency FAB** | âœ… å®Œæˆ | æµ®å‹•ç·Šæ€¥é ˜è¡€æŒ‰éˆ• (Panic Button) |
| **Blinking Animation** | âœ… å®Œæˆ | FAB æ…¢é€Ÿè„ˆå‹•å‹•ç•« |

---

## 1. Top Dashboard - Big Colored Cards Grid (The Soul of MIRS)

### è¨­è¨ˆè¦æ ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MIRS Legacy Style Dashboard                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   O+     â”‚ â”‚   O-     â”‚ â”‚   A+     â”‚ â”‚   A-     â”‚           â”‚
â”‚  â”‚          â”‚ â”‚          â”‚ â”‚          â”‚ â”‚          â”‚           â”‚
â”‚  â”‚  12 è¢‹   â”‚ â”‚   3 è¢‹   â”‚ â”‚   8 è¢‹   â”‚ â”‚   2 è¢‹   â”‚           â”‚
â”‚  â”‚          â”‚ â”‚  âš  1å³æœŸ â”‚ â”‚          â”‚ â”‚          â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   B+     â”‚ â”‚   B-     â”‚ â”‚  AB+     â”‚ â”‚  AB-     â”‚           â”‚
â”‚  â”‚          â”‚ â”‚          â”‚ â”‚          â”‚ â”‚          â”‚           â”‚
â”‚  â”‚   5 è¢‹   â”‚ â”‚   0 è¢‹   â”‚ â”‚   4 è¢‹   â”‚ â”‚   0 è¢‹   â”‚           â”‚
â”‚  â”‚          â”‚ â”‚  (ç°è‰²)  â”‚ â”‚          â”‚ â”‚  (ç°è‰²)  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                   â”‚
â”‚  ç¸½åº«å­˜: 34 è¢‹                    [å…¨è¡€][ç´…è¡€çƒ][è¡€æ¼¿][è¡€å°æ¿]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨£å¼è¦å‰‡

| ç‹€æ…‹ | èƒŒæ™¯è‰² | æ•¸é‡é¡è‰² | èªªæ˜ |
|------|--------|----------|------|
| æœ‰åº«å­˜ | `bg-red-900` | `text-yellow-300` | æ·±ç´…èƒŒæ™¯ï¼Œé»ƒè‰²æ•¸å­—é«˜å°æ¯” |
| é›¶åº«å­˜ | `bg-gray-700` | `text-gray-500` | ç°è‰²èƒŒæ™¯ï¼Œå¼±åŒ–é¡¯ç¤º |
| å³å°‡éæœŸ | - | `text-orange-400 animate-pulse` | æ©™è‰²è„ˆå‹•è­¦å‘Š |

### äº’å‹•è¡Œç‚º

```javascript
// é»æ“Šå¡ç‰‡éæ¿¾
filterByBloodType(bloodType) {
    if (this.dashboardFilter === bloodType) {
        this.dashboardFilter = '';  // å†æ¬¡é»æ“Šæ¸…é™¤
    } else {
        this.dashboardFilter = bloodType;
    }
}
```

### HTML å¯¦ä½œ

```html
<div class="grid grid-cols-4 gap-3">
    <template x-for="blood in groupedByBloodType" :key="blood.blood_type">
        <div @click="filterByBloodType(blood.blood_type)"
             class="cursor-pointer rounded-xl p-4 shadow-lg transform hover:scale-105"
             :class="blood.total > 0 ? 'bg-red-900' : 'bg-gray-700'">
            <!-- Blood Type - HUGE -->
            <div class="text-3xl sm:text-4xl font-black text-white" x-text="blood.blood_type"></div>
            <!-- Count - Yellow -->
            <div class="text-xl font-bold"
                 :class="blood.total > 0 ? 'text-yellow-300' : 'text-gray-500'">
                <span x-text="blood.total"></span> è¢‹
            </div>
            <!-- Expiring Indicator -->
            <div x-show="blood.expiring > 0" class="text-orange-400 animate-pulse">
                âš  <span x-text="blood.expiring"></span> å³æœŸ
            </div>
        </div>
    </template>
</div>
```

---

## 2. Unit List - Clean & Scannable

### è¨­è¨ˆè¦æ ¼

ç§»é™¤å¤šé¤˜çš„é‚Šæ¡†å’Œç°è‰²èƒŒæ™¯ï¼Œæ”¹ç”¨**å·¦å´ 8px è‰²æ¢**ä¾è¡€å“é¡å‹å€åˆ†ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–Œâ–Œâ–Œâ–Œ  O+   [å…¨è¡€]   [å¯ç”¨]                      [FIFO å„ªå…ˆ]    â”‚
â”‚ â–Œâ–Œâ–Œâ–Œ  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ â–Œâ–Œâ–Œâ–Œ  BU-1705123456-abcd1234              æ•ˆæœŸ: 48h            â”‚
â”‚ â–Œâ–Œâ–Œâ–Œ  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ æ·±ç´…   [      ç™¼è¡€      ]  [     é ç´„     ]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å·¦å´é‚Šæ¡†é¡è‰²è¦å‰‡

| è¡€å“é¡å‹ | é‚Šæ¡†é¡è‰² | Tailwind Class |
|----------|----------|----------------|
| WB (å…¨è¡€) | æ·±ç´… | `border-l-8 border-red-900` |
| PRBC (ç´…è¡€çƒ) | ç´… | `border-l-8 border-red-600` |
| FFP (è¡€æ¼¿) | é»ƒ | `border-l-8 border-yellow-400` |
| PLT (è¡€å°æ¿) | æ·ºé»ƒ | `border-l-8 border-yellow-200` |
| CRYO (å†·æ²‰æ¾±) | é’ | `border-l-8 border-cyan-400` |

### çªé¡¯å…ƒç´ 

1. **Unit ID**: `font-mono font-bold text-gray-700` - ç­‰å¯¬ç²—é«”
2. **Expiry**: ä¾å‰©é¤˜æ™‚é–“è®Šè‰²
   - `> 72h`: `text-green-600`
   - `24-72h`: `text-orange-600`
   - `< 24h`: `text-red-600 animate-pulse`

### JavaScript å¯¦ä½œ

```javascript
getUnitTypeBorderColorClass(unitType) {
    const classes = {
        'WB': 'border-red-900',
        'PRBC': 'border-red-600',
        'FFP': 'border-yellow-400',
        'PLT': 'border-yellow-200',
        'CRYO': 'border-cyan-400'
    };
    return classes[unitType] || 'border-gray-300';
}
```

---

## 3. Emergency FAB - The Panic Button

### è¨­è¨ˆè¦æ ¼

æµ®å‹•åœ¨ç•«é¢å³ä¸‹è§’çš„ç·Šæ€¥é ˜è¡€æŒ‰éˆ•ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚                              ä¸»ç•«é¢å…§å®¹                           â”‚
â”‚                                                                   â”‚
â”‚                                                                   â”‚
â”‚                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                                         â”‚  ğŸš¨ ç·Šæ€¥é ˜è¡€       â”‚    â”‚
â”‚                                         â”‚  (æ…¢é€Ÿè„ˆå‹•)        â”‚    â”‚
â”‚                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  [Tab å°è¦½åˆ—]                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨£å¼è¦å‰‡

| å…ƒç´  | æ¨£å¼ |
|------|------|
| æŒ‰éˆ•èƒŒæ™¯ | `bg-red-600 hover:bg-red-700` |
| é‚Šæ¡† | `border-4 border-red-300` |
| å‹•ç•« | `animate-pulse-slow` (2s é€±æœŸ) |
| å®šä½ | `fixed bottom-20 right-4 z-40` |

### å‹•ç•«å®šç¾©

```css
@keyframes pulse-slow {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.9; transform: scale(1.05); }
}
.animate-pulse-slow {
    animation: pulse-slow 2s ease-in-out infinite;
}
```

### é»æ“Šå¾Œ Modal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸš¨ ç·Šæ€¥é ˜è¡€ Emergency Release                  â”‚
â”‚                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”‚
â”‚                    åƒ…é™ O å‹è¡€ (è¬èƒ½ä¾›è¡€)                         â”‚
â”‚                                                                   â”‚
â”‚    ç·Šæ€¥ç™¼è¡€å°‡è·³éæ­£å¸¸æµç¨‹ï¼Œäº‹å¾Œéœ€è£œé–‹é†«å›‘                         â”‚
â”‚                                                                   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚                     O+                                   â”‚  â”‚
â”‚    â”‚                   ç·Šæ€¥ç™¼è¡€                               â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚                     O-          [æ¨è–¦]                   â”‚  â”‚
â”‚    â”‚                   è¬èƒ½è¡€å‹                               â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚                     å–æ¶ˆ                                 â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## åŸå§‹ MIRS vs Blood Bank PWA v2.7 æ¯”è¼ƒ

### Dashboard æ¯”è¼ƒ

| é …ç›® | åŸå§‹ MIRS | Blood Bank PWA v2.7 |
|------|-----------|---------------------|
| **å¡ç‰‡ä½ˆå±€** | 8 æ¬„ (æ¡Œé¢) / 4 æ¬„ (æ‰‹æ©Ÿ) | 4 æ¬„å›ºå®š (æ‰‹æ©Ÿå„ªåŒ–) |
| **èƒŒæ™¯è‰²** | æ·±ç´…æ¼¸å±¤ | æ·±ç´… (éç©º) / ç°è‰² (ç©º) |
| **æ•¸å­—é¡è‰²** | ç™½è‰² | é»ƒè‰² (æ›´é«˜å°æ¯”) |
| **å³æœŸè­¦ç¤º** | âŒ ç„¡ | âœ… æ©™è‰²è„ˆå‹• |
| **é»æ“Šéæ¿¾** | âŒ ç„¡ | âœ… æœ‰ |

### åˆ—è¡¨æ¯”è¼ƒ

| é …ç›® | åŸå§‹ MIRS | Blood Bank PWA v2.7 |
|------|-----------|---------------------|
| **é¡¯ç¤ºæ–¹å¼** | ç„¡ç¨ç«‹åˆ—è¡¨ | ç¨ç«‹ Tab + Unit-level |
| **ç‹€æ…‹å€åˆ†** | âŒ ç„¡ | âœ… å·¦å´è‰²æ¢ (ä¾è¡€å“é¡å‹) |
| **Unit ID** | âŒ ç„¡ | âœ… ç­‰å¯¬ç²—é«”çªé¡¯ |
| **æ•ˆæœŸé¡¯ç¤º** | âŒ ç„¡ | âœ… ä¾å‰©é¤˜æ™‚é–“è®Šè‰² |

### ç·Šæ€¥åŠŸèƒ½æ¯”è¼ƒ

| é …ç›® | åŸå§‹ MIRS | Blood Bank PWA v2.7 |
|------|-----------|---------------------|
| **ç·Šæ€¥å…¥å£** | è¡¨å–®å…§æŒ‰éˆ• | FAB æµ®å‹•æŒ‰éˆ• (æ°¸é å¯è¦‹) |
| **è¦–è¦ºæç¤º** | âŒ ç„¡ | âœ… æ…¢é€Ÿè„ˆå‹• |
| **ä¸€éµç™¼è¡€** | âŒ éœ€å¡«è¡¨ | âœ… O+/O- ç›´æ¥é»æ“Š |

---

## æŠ€è¡“å¯¦ä½œç´°ç¯€

### æ–°å¢ JavaScript

```javascript
// v2.7: Dashboard filter state
dashboardFilter: '',

// v2.7: ç¸½åº«å­˜
get totalUnits() {
    return this.groupedByBloodType.reduce((sum, b) => sum + b.total, 0);
},

// v2.7: ç¸½å³æœŸ
get totalExpiring() {
    return this.groupedByBloodType.reduce((sum, b) => sum + b.expiring, 0);
},

// v2.7: Dashboard éæ¿¾å¾Œçš„ availability
get filteredByDashboard() {
    if (!this.dashboardFilter) return this.availability;
    return this.availability.filter(a => a.blood_type === this.dashboardFilter);
},

// v2.7: é»æ“Šè¡€å‹å¡ç‰‡éæ¿¾
filterByBloodType(bloodType) {
    if (this.dashboardFilter === bloodType) {
        this.dashboardFilter = '';
    } else {
        this.dashboardFilter = bloodType;
    }
},

// v2.7: è¡€å“é¡å‹å·¦å´é‚Šæ¡†é¡è‰²
getUnitTypeBorderColorClass(unitType) {
    const classes = {
        'WB': 'border-red-900',
        'PRBC': 'border-red-600',
        'FFP': 'border-yellow-400',
        'PLT': 'border-yellow-200',
        'CRYO': 'border-cyan-400'
    };
    return classes[unitType] || 'border-gray-300';
}
```

### æª”æ¡ˆè®Šæ›´

| æª”æ¡ˆ | è®Šæ›´ |
|------|------|
| `frontend/blood/index.html` | Big Cards Grid + Unit List + FAB |
| `frontend/blood/service-worker.js` | v2.7.0 å¿«å–åˆ·æ–° |

---

## ç‰ˆæœ¬æ­·å²

| ç‰ˆæœ¬ | æ—¥æœŸ | è®Šæ›´ |
|------|------|------|
| v2.5 | 2026-01-12 | P4: å¾…è£œå–®è¿½è¹¤ + é ç´„é€¾æ™‚è‡ªå‹•é‡‹æ”¾ |
| v2.6 | 2026-01-13 | UI æ”¹é€²: ä»¿åŸå§‹ MIRS è¡€åº«è¨­è¨ˆã€è¡€å“è‰²å¡Šã€WB æ”¯æ´ |
| v2.7 | 2026-01-13 | MIRS Legacy Style: Big Cards Gridã€å·¦å´è‰²æ¢ã€Emergency FAB |
| v2.7.1 | 2026-01-13 | å…¥åº«å¡ç‰‡å¼è¨­è¨ˆã€WB Demo è³‡æ–™ã€Responsive å„ªåŒ– |
| v2.8.0 | 2026-01-14 | Tab é‡æ§‹: åº«å­˜ç¸½è¦½æ•´åˆæ¸…å–®ã€å…¥åº«+æ¨™ç±¤ Tabã€ç·Šæ€¥æè¡€æµç¨‹ |

---

**æ–‡ä»¶å®Œæˆ**
**æ’°å¯«è€…**: Claude Code
**æ—¥æœŸ**: 2026-01-14
